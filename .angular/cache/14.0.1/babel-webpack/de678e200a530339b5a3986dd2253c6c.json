{"ast":null,"code":"import { Manutencao } from '../model/manutencao';\nimport { Shared } from './../util/shared';\nimport { ManutencaoPromiseService } from './manutencao-promise.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./mantencao.service\";\nimport * as i2 from \"./manutencao-promise.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = [\"form\"];\n\nfunction FormularioComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"red\", !ctx_r0.isSuccess)(\"blue\", ctx_r0.isSuccess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.message, \" \");\n  }\n}\n\nfunction FormularioComponent_div_37_table_1_tr_13_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const u_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, u_r9.valor, \"BRL\"));\n  }\n}\n\nfunction FormularioComponent_div_37_table_1_tr_13_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1, \"**\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction FormularioComponent_div_37_table_1_tr_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"uppercase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtemplate(8, FormularioComponent_div_37_table_1_tr_13_span_8_Template, 3, 4, \"span\", 25);\n    i0.ɵɵtemplate(9, FormularioComponent_div_37_table_1_tr_13_ng_template_9_Template, 2, 0, \"ng-template\", null, 26, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\", 27)(15, \"a\", 28);\n    i0.ɵɵlistener(\"click\", function FormularioComponent_div_37_table_1_tr_13_Template_a_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const u_r9 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r14.onEdit(u_r9));\n    });\n    i0.ɵɵelementStart(16, \"small\");\n    i0.ɵɵtext(17, \"Editar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"| \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"a\", 28);\n    i0.ɵɵlistener(\"click\", function FormularioComponent_div_37_table_1_tr_13_Template_a_click_19_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const u_r9 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r16.onDelete(u_r9.titulo));\n    });\n    i0.ɵɵelementStart(20, \"small\");\n    i0.ɵɵtext(21, \"Apagar\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const u_r9 = ctx.$implicit;\n\n    const _r11 = i0.ɵɵreference(10);\n\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 5, u_r9.titulo));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 7, u_r9.descricao));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", u_r9.valor > 100)(\"ngIfElse\", _r11);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(13, 9, u_r9.dt_manutencao, \"dd/MM/yyy\"));\n  }\n}\n\nfunction FormularioComponent_div_37_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 23)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Titulo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Descri\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Valor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Data manuten\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"th\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"tbody\");\n    i0.ɵɵtemplate(13, FormularioComponent_div_37_table_1_tr_13_Template, 22, 12, \"tr\", 24);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const manutencoes_r6 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", manutencoes_r6);\n  }\n}\n\nfunction FormularioComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, FormularioComponent_div_37_table_1_Template, 14, 1, \"table\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const manutencoes_r6 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", manutencoes_r6 && manutencoes_r6.length > 0);\n  }\n}\n\nexport class FormularioComponent {\n  constructor(manutencaoService, manutencaoPromiseService) {\n    this.manutencaoService = manutencaoService;\n    this.manutencaoPromiseService = manutencaoPromiseService;\n    this.userRepassword = '';\n    this.isShowMessage = false;\n  }\n\n  ngOnInit() {\n    Shared.initializeWebStorage();\n    this.manutencao = new Manutencao('', '');\n    this.manutencoes$ = this.manutencaoPromiseService.getAll();\n  }\n\n  onSubmit() {\n    this.isSubmitted = true;\n    this.manutencaoPromiseService.save(this.manutencao).then(value => {\n      console.log(value);\n\n      try {\n        if (!this.manutencaoService.isExist(value.titulo)) {\n          this.manutencaoService.save(value);\n        } else {\n          this.manutencaoService.update(value);\n        }\n      } catch (err) {\n        alert(err);\n      }\n\n      this.isShowMessage = true;\n      this.isSuccess = true;\n      this.message = 'Cadastro realizado com sucesso!';\n      this.form.reset();\n      this.manutencao = new Manutencao('', '');\n      this.manutencoes$ = this.manutencaoPromiseService.getAll();\n    }).catch(e => {\n      console.log(e);\n      this.isShowMessage = true;\n      this.isSuccess = false;\n      this.message = e;\n    });\n  }\n\n  onEdit(manutencao) {\n    let clone = Manutencao.clone(manutencao);\n    this.manutencao = clone;\n  }\n\n  onDelete(titulo) {\n    let confirmation = window.confirm('Você tem certeza que deseja remover ' + titulo);\n\n    if (!confirmation) {\n      return;\n    }\n\n    let response = this.manutencaoService.delete(titulo);\n    this.isShowMessage = true;\n    this.isSuccess = response;\n\n    if (response) {\n      this.message = 'O item foi removido com sucesso';\n    } else {\n      this.message = 'O item não pode ser removido';\n    }\n\n    this.manutencoes$ = this.manutencaoPromiseService.getAll();\n  }\n\n}\n\nFormularioComponent.ɵfac = function FormularioComponent_Factory(t) {\n  return new (t || FormularioComponent)(i0.ɵɵdirectiveInject(i1.ManutencaoService), i0.ɵɵdirectiveInject(i2.ManutencaoPromiseService));\n};\n\nFormularioComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FormularioComponent,\n  selectors: [[\"app-formulario\"]],\n  viewQuery: function FormularioComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.form = _t.first);\n    }\n  },\n  features: [i0.ɵɵProvidersFeature([ManutencaoPromiseService])],\n  decls: 39,\n  vars: 12,\n  consts: [[1, \"row\"], [1, \"col\", \"s12\"], [\"id\", \"msg-login\", \"class\", \"card-panel red white-text\", 3, \"red\", \"blue\", 4, \"ngIf\"], [1, \"col\", \"s12\", 3, \"submit\"], [\"form\", \"ngForm\"], [1, \"input-field\", \"col\", \"s12\"], [\"id\", \"input-titulo\", \"name\", \"input-titulo\", \"type\", \"text\", \"pattern\", \"^[a-zA-Z]{4,}$\", \"required\", \"\", 1, \"validate\", 3, \"ngModel\", \"ngModelChange\"], [\"titulo\", \"ngModel\"], [\"for\", \"input-titulo\"], [1, \"red-text\", 3, \"hidden\"], [\"id\", \"input-descricao\", \"name\", \"input-descricao\", \"type\", \"text\", \"pattern\", \"^[a-zA-Z]{4,}$\", \"required\", \"\", 1, \"novalidate\", 3, \"ngModel\", \"ngModelChange\"], [\"descricao\", \"ngModel\"], [\"for\", \"input-descricao\"], [1, \"input-field\", \"col\", \"s12\", \"16\"], [\"id\", \"input-valor\", \"name\", \"input-valor\", \"type\", \"number\", \"required\", \"\", 1, \"validate\", 3, \"ngModel\", \"ngModelChange\"], [\"valor\", \"ngModel\"], [\"for\", \"input-valor\"], [\"id\", \"input-dt_manutencao\", \"name\", \"input-dt_manutencao\", \"type\", \"date\", \"required\", \"\", 1, \"validate\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"input-dt_manutencao\"], [\"type\", \"submit\", 1, \"btn\", \"waves-effect\", \"waves-light\", \"amber\", \"darken-4\", 3, \"disabled\"], [4, \"ngIf\"], [\"id\", \"msg-login\", 1, \"card-panel\", \"red\", \"white-text\"], [\"class\", \"highlight\", 4, \"ngIf\"], [1, \"highlight\"], [4, \"ngFor\", \"ngForOf\"], [\"style\", \"color:red;\", 4, \"ngIf\", \"ngIfElse\"], [\"elseBlock\", \"\"], [1, \"right\"], [3, \"click\"], [2, \"color\", \"red\"], [2, \"color\", \"blue\"]],\n  template: function FormularioComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h6\");\n      i0.ɵɵtext(1, \"Formul\\u00E1rio de cadastro de manuten\\u00E7\\u00E3o\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"hr\");\n      i0.ɵɵelementStart(3, \"div\", 0)(4, \"div\", 1);\n      i0.ɵɵtemplate(5, FormularioComponent_div_5_Template, 2, 5, \"div\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"form\", 3, 4);\n      i0.ɵɵlistener(\"submit\", function FormularioComponent_Template_form_submit_6_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(8, \"div\", 5)(9, \"input\", 6, 7);\n      i0.ɵɵlistener(\"ngModelChange\", function FormularioComponent_Template_input_ngModelChange_9_listener($event) {\n        return ctx.manutencao.titulo = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"label\", 8);\n      i0.ɵɵtext(12, \"T\\u00EDtulo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 9);\n      i0.ɵɵtext(14, \" Por favor, informe o t\\u00EDtulo \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 5)(16, \"input\", 10, 11);\n      i0.ɵɵlistener(\"ngModelChange\", function FormularioComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.manutencao.descricao = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"label\", 12);\n      i0.ɵɵtext(19, \"Descri\\u00E7\\u00E3o\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 9);\n      i0.ɵɵtext(21, \" Por favor, informe a descricao da manuten\\u00E7\\u00E3o \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 13)(23, \"input\", 14, 15);\n      i0.ɵɵlistener(\"ngModelChange\", function FormularioComponent_Template_input_ngModelChange_23_listener($event) {\n        return ctx.manutencao.valor = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"label\", 16);\n      i0.ɵɵtext(26, \"Valor\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 9);\n      i0.ɵɵtext(28, \" Por favor, informe o valor da manuten\\u00E7\\u00E3o \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"div\", 13)(30, \"input\", 17);\n      i0.ɵɵlistener(\"ngModelChange\", function FormularioComponent_Template_input_ngModelChange_30_listener($event) {\n        return ctx.manutencao.dt_manutencao = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"label\", 18);\n      i0.ɵɵtext(32, \"Data da manuten\\u00E7\\u00E3o\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(33, \"button\", 19);\n      i0.ɵɵtext(34, \"Enviar\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(35, \"h5\");\n      i0.ɵɵtext(36, \"Manuten\\u00E7\\u00F5es cadastrados\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(37, FormularioComponent_div_37_Template, 2, 1, \"div\", 20);\n      i0.ɵɵpipe(38, \"async\");\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(7);\n\n      const _r2 = i0.ɵɵreference(10);\n\n      const _r3 = i0.ɵɵreference(17);\n\n      const _r4 = i0.ɵɵreference(24);\n\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.isShowMessage);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.manutencao.titulo);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"hidden\", _r2.valid || _r2.untouched);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.manutencao.descricao);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"hidden\", _r3.valid || _r3.untouched);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.manutencao.valor);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"hidden\", _r4.valid || _r4.untouched);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.manutencao.dt_manutencao);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !_r1.valid);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(38, 10, ctx.manutencoes$));\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.PatternValidator, i4.NgModel, i4.NgForm, i3.AsyncPipe, i3.UpperCasePipe, i3.TitleCasePipe, i3.CurrencyPipe, i3.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJmb3JtdWxhcmlvLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Manutencao","Shared","ManutencaoPromiseService","i0","ctx_r0","_r11","FormularioComponent","constructor","manutencaoService","manutencaoPromiseService","ngOnInit","initializeWebStorage","manutencao","manutencoes$","getAll","onSubmit","isSubmitted","save","then","value","console","log","isExist","titulo","update","err","alert","isShowMessage","isSuccess","message","form","reset","catch","e","onEdit","clone","onDelete","confirmation","window","confirm","response","delete","selectors","viewQuery","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/buzzello/organizador-de-manutencao-periodica-carros/src/app/formulario/formulario.component.ts","/home/buzzello/organizador-de-manutencao-periodica-carros/src/app/formulario/formulario.component.html"],"sourcesContent":["import { ManutencaoService } from './mantencao.service';\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Manutencao } from '../model/manutencao';\nimport { Shared } from './../util/shared';\nimport { ManutencaoPromiseService } from './manutencao-promise.service';\n\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'app-formulario',\n  templateUrl: './formulario.component.html',\n  styleUrls: ['./formulario.component.css'],\n  providers: [ManutencaoPromiseService],\n})\nexport class FormularioComponent implements OnInit {\n  @ViewChild('form') form!: NgForm;\n\n  manutencao!: Manutencao;\n  manutencoes$?: Observable<Manutencao[] | undefined>;\n\n  userRepassword: string = '';\n\n  isSubmitted!: boolean;\n  isShowMessage: boolean = false;\n  isSuccess!: boolean;\n  message!: string;\n\n  constructor(\n    private manutencaoService: ManutencaoService,\n    private manutencaoPromiseService: ManutencaoPromiseService\n  ) {}\n\n  ngOnInit(): void {\n    Shared.initializeWebStorage();\n    this.manutencao = new Manutencao('', '');\n\n    this.manutencoes$ = this.manutencaoPromiseService.getAll();\n  }\n\n  onSubmit() {\n    this.isSubmitted = true;\n    this.manutencaoPromiseService\n      .save(this.manutencao)\n      .then((value) => {\n        console.log(value);\n\n        try {\n          if (!this.manutencaoService.isExist(value!.titulo)) {\n            this.manutencaoService.save(value!);\n          } else {\n            this.manutencaoService.update(value!);\n          }\n        } catch (err) {\n          alert(err);\n        }\n\n        this.isShowMessage = true;\n        this.isSuccess = true;\n        this.message = 'Cadastro realizado com sucesso!';\n        this.form.reset();\n        this.manutencao = new Manutencao('', '');\n\n        this.manutencoes$ = this.manutencaoPromiseService.getAll();\n      })\n      .catch((e) => {\n        console.log(e);\n        this.isShowMessage = true;\n        this.isSuccess = false;\n        this.message = e;\n      });\n  }\n\n  onEdit(manutencao: Manutencao) {\n    let clone = Manutencao.clone(manutencao);\n    this.manutencao = clone;\n  }\n\n  onDelete(titulo: string) {\n    let confirmation = window.confirm(\n      'Você tem certeza que deseja remover ' + titulo\n    );\n\n    if (!confirmation) {\n      return;\n    }\n\n    let response: boolean = this.manutencaoService.delete(titulo);\n    this.isShowMessage = true;\n    this.isSuccess = response;\n\n    if (response) {\n      this.message = 'O item foi removido com sucesso';\n    } else {\n      this.message = 'O item não pode ser removido';\n    }\n\n    this.manutencoes$ = this.manutencaoPromiseService.getAll();\n  }\n}\n","<h6>Formulário de cadastro de manutenção</h6>\n<hr />\n<div class=\"row\">\n  <div class=\"col s12\">\n    <div id=\"msg-login\" class=\"card-panel red white-text\" [class.red]=\"!this.isSuccess\" [class.blue]=\"this.isSuccess\"\n      *ngIf=\"this.isShowMessage\">\n      {{ this.message }}\n    </div>\n\n  </div>\n\n  <form class=\"col s12\" #form=\"ngForm\" (submit)=\"onSubmit()\">\n    <div class=\"input-field col s12\">\n      <input id=\"input-titulo\" name=\"input-titulo\" type=\"text\" class=\"validate\" [(ngModel)]=\"this.manutencao.titulo\"\n        pattern=\"^[a-zA-Z]{4,}$\" #titulo=\"ngModel\" required />\n      <label for=\"input-titulo\">Título</label>\n      <div class=\"red-text\" [hidden]=\"titulo.valid || titulo.untouched\">\n        Por favor, informe o título\n      </div>\n    </div>\n\n    <div class=\"input-field col s12\">\n      <input id=\"input-descricao\" name=\"input-descricao\" type=\"text\" class=\"novalidate\"\n        [(ngModel)]=\"this.manutencao.descricao\" pattern=\"^[a-zA-Z]{4,}$\" #descricao=\"ngModel\" required />\n      <label for=\"input-descricao\">Descrição</label>\n      <div class=\"red-text\" [hidden]=\"descricao.valid || descricao.untouched\">\n        Por favor, informe a descricao da manutenção\n      </div>\n    </div>\n\n    <div class=\"input-field col s12 16\">\n      <input id=\"input-valor\" name=\"input-valor\" type=\"number\" class=\"validate\" [(ngModel)]=\"this.manutencao.valor\"\n        #valor=\"ngModel\" required />\n      <label for=\"input-valor\">Valor</label>\n      <div class=\"red-text\" [hidden]=\"valor.valid || valor.untouched\">\n        Por favor, informe o valor da manutenção\n      </div>\n    </div>\n\n    <div class=\"input-field col s12 16\">\n      <input id=\"input-dt_manutencao\" name=\"input-dt_manutencao\" type=\"date\" class=\"validate\"\n        [(ngModel)]=\"this.manutencao.dt_manutencao\" required />\n      <label for=\"input-dt_manutencao\">Data da manutenção</label>\n    </div>\n\n    <button class=\"btn waves-effect waves-light amber darken-4\" type=\"submit\" [disabled]=\"!form.valid\">Enviar</button>\n\n  </form>\n</div>\n\n<h5>Manutenções cadastrados</h5>\n<div *ngIf=\"(manutencoes$ | async) as manutencoes\">\n<table class=\"highlight\" *ngIf=\"manutencoes && manutencoes!.length > 0\">\n  <thead>\n    <tr>\n      <th>Titulo</th>\n      <th>Descrição</th>\n      <th>Valor</th>\n      <th>Data manutenção</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody >\n\n    <tr *ngFor=\"let u of manutencoes\">\n\n\n        <td>{{ u.titulo | titlecase }}</td>\n        <td>{{ u.descricao | uppercase }}</td>\n        <td>\n          <span *ngIf=\"u.valor > 100; else elseBlock\" style=\"color:red;\">{{ u.valor | currency : \"BRL\" }}</span>\n          <ng-template #elseBlock><span style=\"color:blue;\">**</span></ng-template>\n\n        </td>\n\n        <td>{{ u.dt_manutencao | date : \"dd/MM/yyy\" }}</td>\n        <td class=\"right\">\n          <a (click)=\"onEdit(u)\">\n\n            <small>Editar</small>|\n          </a>\n\n          <a (click)=\"onDelete(u.titulo)\">\n            <small>Apagar</small>\n\n          </a>\n        </td>\n\n    </tr>\n\n  </tbody>\n</table>\n</div>\n"]},"metadata":{},"sourceType":"module"}