<h6>Formulário de cadastro de manutenção</h6>
<hr />
<div class="row">
  <div class="col s12">
    <div id="msg-login" class="card-panel red white-text" [class.red]="!this.isSuccess" [class.blue]="this.isSuccess"
      *ngIf="this.isShowMessage">
      {{ this.message }}
    </div>

  </div>

  <form class="col s12" #form="ngForm" (submit)="onSubmit()">
    <div class="input-field col s12">
      <input id="input-titulo" name="input-titulo" type="text" class="validate" [(ngModel)]="this.manutencao.titulo"
        pattern="^[a-zA-Z]{4,}$" #titulo="ngModel" required />
      <label for="input-titulo">Título</label>
      <div class="red-text" [hidden]="titulo.valid || titulo.untouched">
        Por favor, informe o título
      </div>
    </div>

    <div class="input-field col s12">
      <input id="input-descricao" name="input-descricao" type="text" class="novalidate"
        [(ngModel)]="this.manutencao.descricao" pattern="^[a-zA-Z]{4,}$" #descricao="ngModel" required />
      <label for="input-descricao">Descrição</label>
      <div class="red-text" [hidden]="descricao.valid || descricao.untouched">
        Por favor, informe a descricao da manutenção
      </div>
    </div>

    <div class="input-field col s12 16">
      <input id="input-valor" name="input-valor" type="number" class="validate" [(ngModel)]="this.manutencao.valor"
        #valor="ngModel" required />
      <label for="input-valor">Valor</label>
      <div class="red-text" [hidden]="valor.valid || valor.untouched">
        Por favor, informe o valor da manutenção
      </div>
    </div>

    <div class="input-field col s12 16">
      <input id="input-dt_manutencao" name="input-dt_manutencao" type="date" class="validate"
        [(ngModel)]="this.manutencao.dt_manutencao" required />
      <label for="input-dt_manutencao">Data da manutenção</label>
    </div>

    <button class="btn waves-effect waves-light amber darken-4" type="submit" [disabled]="!form.valid">Enviar</button>
  </form>
</div>
<h5>Manutenções cadastrados</h5>
<div *ngIf="(manutencoes$ | async) as manutencoes">
<table class="highlight" *ngIf="manutencoes && manutencoes!.length > 0">
  <thead>
    <tr>
      <th>Titulo</th>
      <th>Descrição</th>
      <th>Valor</th>
      <th>Data manutenção</th>
      <th></th>
    </tr>
  </thead>
  <tbody >

    <tr *ngFor="let u of manutencoes">


        <td>{{ u.titulo | titlecase }}</td>
        <td>{{ u.descricao | uppercase }}</td>
        <td>
          <span *ngIf="u.valor > 100; else elseBlock" style="color:red;">{{ u.valor | currency : "BRL" }}</span>
          <ng-template #elseBlock><span style="color:blue;">**</span></ng-template>

        </td>

        <td>{{ u.dt_manutencao | date : "dd/MM/yyy" }}</td>
        <td class="right">
          <a (click)="onEdit(u)">

            <small>Editar</small>|
          </a>

          <a (click)="onDelete(u.titulo)">
            <small>Apagar</small>

          </a>
        </td>

    </tr>

  </tbody>
</table>
</div>
